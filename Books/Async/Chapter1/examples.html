<html>
  <head>
    <title>Snippets</title>
  </head>
  <body>
    <script type="text/javascript">
      // loop with timeout
      (function(){
        for(var i = 0; i <= 3; i++){
          setTimeout(function(){console.log(i);}, 0);
        }
      })();

      // fixed loop with IIFE
      (function(){
        for(var i = 0; i <= 3; i++){(function(j){
            setTimeout(function(){console.log(j);}, 0);
          })(i);
        }
      })();

      // loop blocking timeout
      (function(){
        var start = new Date().getTime();
        setTimeout(function(){
          var end = new Date().getTime();
          var elapsed = end - start;
          console.log('Time elapsed:' +   elapsed + ' : ms');
        },500);

        // run while loop for a second which should block the setTimeout callback
        while(new Date().getTime() - start < 1000){};
      })();


    </script>
  </body>
</html>
