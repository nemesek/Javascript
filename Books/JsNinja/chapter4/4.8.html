<html>
	<head>
		<title>Storing a collection of unique functions</title>
		<script type="text/javascript" src="../assert.js"></script>
		<link href="../assert.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
		<script type="text/javascript">
			var store = {
				nextId: 1,		// keeps track of the next available id to be assigned
				cache:{},		// creates an object to serve as a cache in which we'll store functions
				add: function(fn){	// Adds functions to the cache but only if they're unique
					if(!fn.id){
						fn.id = store.nextId++;
						return !!(store.cache[fn.id] = fn);
					}
				}
			};

			function ninja(){}

			assert(store.add(ninja), "Function was safely added");
			assert(!store.add(ninja), "But it was only added once");
		</script>
	</body>
</html>
	