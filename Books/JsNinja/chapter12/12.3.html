<html>
<head>
	<title>A function for setting and getting attribute values</title>
	<script type="text/javascript" src="../assert.js"></script>
	<link href="../assert.css" rel="stylesheet" type="text/css"/>
</head>
<body>
	<div id="testSubject"></div>

	<script type="text/javascript">
		(function(){ // creates a private scope
			// creates the translation map
			var translations = {
				"for": "htmlFor",
				"class": "className",
				readonly: "readOnly",
				maxlength: "maxLength",
				cellspacing: "cellSpacing",
				rowspan: "rowSpan",
				colspan: "colSpan",
				tabindex: "tabIndex",
				cellpadding: "cellPadding",
				usemap: "useMap",
				frameborder: "frameBorder",
				contenteditable: "contentEditable"
			};

			// Defines the set/get function
			window.attr = function(element, name, value){
				var property = translations[name] || name,
				propertyExists = typeof element[property] !== "undefined";

				if(typeof value !== "undefined"){
					if(propertyExists){
						element[property] = value;
					}
					else{
						element.setAttribute(name, value);
					}
				}

				return propertyExists ? element[property] : element.getAtrribute(name);
			};
		})();

		// tests our new function
		var subject = document.getElementById('testSubject');
		assert(attr(subject, 'id') === 'testSubject', "id value fetched");
		assert(attr(subject, 'id', 'other') === 'other', "new id value set");
		assert(attr(subject, 'id') === 'other', "new id value fetched");
		assert(attr(subject,'data-custom', 'whatever') === 'whatever', "custom attribute set");
		assert(attr(subject, 'data-custom') === 'whatever', "custom attribute fetched");
	</script>
</body>
</html>