<html>
  <head>
    <title>A function to bind event handlers with tracking</title>
    <script type="text/javascript" src="data.js"></script>
    <script type="text/javascript" src="event.js"></script>
    <script type="text/javascript" src="fixup.js"></script>
  </head>
  <body>
      <script type="text/javascript">
        // smoke test
        // Binds the load handler
        addEvent(window, "load", function(){
            var subjects = document.getElementsByTagName("div");

            for(var i = 0; i < subjects.length; i++) (function(elem){
              // binds mouse events
              addEvent(elem, "mouseover", function handler(e){
                this.style.backgroundColor = "red";
              });

              // binds click events
              addEvent(elem, "click", function handler(e){
                this.style.backgroundColor = "green";
                removeEvent(elem, "click", handler);
              });

            })(subjects[i]);
        });

      </script>
      <div id="testSubject1" title="Click once">test 1</div>
      <div id="testSubject2" title="mouse over">test 2</div>
      <div id="testSubject3" title="many times">test 3</div>
  </body>
</html>
